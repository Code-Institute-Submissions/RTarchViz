{% extends "base.html" %}
{% load staticfiles %}

{# Load required js and css #}
{% block body_js %}
<script src="{% static 'js/blog.js' %}"></script>
{% endblock %}
{% block head_css %}
<link rel="stylesheet" href="{% static 'css/blog.css' %}">
{% endblock %}

{# set page info #}
{% block page_title %}Latest News{% endblock %}

{# post_list content #}
{% block content %}
<main id="postList">

  <header class="post-list-header">
      <div class="jumbotron jumbotron-fluid">
        <div class="container">
          <h1 class="display-4">Latest News</h1>
          <p class="lead">News and Tutorials</p>
          <hr class="my-4">
          <p>It uses utility classes for typography and spacing to space content out within the larger container.</p>
        </div>
      </div>
  </header>

  <section class="post-list container">

    <!-- placeholder for filtering news -->
    <div class="post-list-filter mb-5">
      <form action="{% url 'filter' %}" method="GET">
        <div class="form-group">
          <label for="filterSelect">Filter Blog by</label>
          <select id="filterSelect" class="custom-select" name="filter-select">
            <option>newest</option>
            <option>oldest</option>
            <option>tutorials</option>
            <option>news</option>
            <option>most popular</option>
          </select>
        </div>
        <div class="form-group">
          <button type="submit" class="btn btn-primary">Filter</button>
        </div>
      </form>
    </div>
    
    <div class="post-list-cards">
      <div class="row">
        {% for post in posts %}
        <div class="col-lg-6">
          <div class="card mb-5">
            <a href="{{ post.get_post_detail_url }}">
              <div class="card-img-top" style="background-image: url('{% if post.image %}/media/{{ post.image }}{% else %}http://placehold.it/500?text=bkg-img{% endif %}');"></div>
            </a>
            <div class="card-body">
              <h5 class="card-title"><a href="{{ post.get_post_detail_url }}">{{ post.title }}</a></h5>
              <p class="card-text">{{ post.get_short_content }}</p>
              <p class="card-text"><small class="text-muted">{{ post.published_date }}</small></p>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <nav class="post-list-pagination">
      <ul class="pagination justify-content-center">
        {% if posts.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?blog_page={{ posts.previous_page_number }}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
            <span>Previous</span>
          </a>
        </li>
        {% endif %}
        {% if posts.has_previous or posts.has_next %}
        <li class="page-item page-link">Page {{ posts.number }} of {{ posts.paginator.num_pages }}</li>
        {% endif %}
        {% if posts.has_next %}
        <li class="page-item">
          <a class="page-link" href="?blog_page={{ posts.next_page_number }}" aria-label="Next">
              <span>Next</span>
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
        {% endif %}
      </ul>
    </nav>

  </section>
</main>
{% endblock %}
